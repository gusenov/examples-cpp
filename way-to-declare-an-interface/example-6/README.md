# Non-Virtual-Interface (NVI) vs. Curiously Recurring Template Pattern (CRTP)

Обе формы позволяют переиспользовать общий интерфейс и внедрять
[pre/post condition](http://www.programmingincpp.com/precondition-and-postcondition-of-a-function.html)
testing в интерфейсный класс.

Преимущество динамического полиморфизма в runtime гибкости, но за это
приходится платить вызовами виртуальных функций (обычно вызов совершается
через указатель на функции с небольшими возможностями для инлайнинга).

В статическом полиморфизме нет оверхеда из-за вызова виртуальных функций,
но недостаток в том, что нужно больше boilerplate кода чтобы знать, что
вызывается на этапе компиляции.

Т.е. это трейдоф между эффективностью и гибкостью.


P.S. Также для compile-time полиморфизма используются шаблонные параметры.
Разница между статическим интерфейсом через CRTP идиому и обыкновенными
шаблонными параметрами в том, что CRTP-type interface явный (основан на
функциях-членах), а шаблонный интерфейс неявный (основан на валидных
выражениях).
